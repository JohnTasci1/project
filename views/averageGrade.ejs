<%- include("partials/header") -%>
<style>
    button {
        margin-left:2px;
    }
</style>
<center>
</br>
<h1>Average Grade Calculator</h1>
<br/>
<table class="form-table" id="customFields">
    <tr valign="top">
      <th scope="row"><label></label></th>
      <td>
        <input type="number" class="customFieldName code" name="customFieldName[]" placeholder="Grade" /> &ensp;
        <button href="javascript:void(0);" class="addCF btn btn-success">Add</button>
      </td>
    </tr>
  </table>
  <br/>
  <button id="click" class="btn btn-primary calculate-group">Average Grade</button>
  <br/>
  <button class = "btn btn-light border border dark" id="averageGrade">Grade %</button>
  <br/>
  <br/>
  <button class = "btn btn-light border border dark" id="averageGrade2">Grade Letter</button>
  <p></p>
</center>
  <table class = "table table-striped table-bordered">
    <thead class = "thead-dark">
        <th scope="col">Letter Grade</th>
        <th scope="col">Percent Grade</th>
        <th scope="col">4.0 Scale</th>
    </thead>
    <tbody>
      <tr><td>A+</td><td>97-100</td><td>4.0</td></tr>
      <tr><td>A</td><td>93-96</td><td>4.0</td></tr>
      <tr><td>A-</td><td>90-92</td><td>3.7</td></tr>
      <tr><td>B+</td><td>87-89</td><td>3.3</td></tr>
      <tr><td>B</td><td>83-86</td><td>3.0</td></tr>
      <tr><td>B-</td><td>80-82</td><td>2.7</td></tr>
      <tr><td>C+</td><td>77-79</td><td>2.3</td></tr>
      <tr><td>C</td><td>73-76</td><td>2</td></tr>
      <tr><td>C-</td><td>70-72</td><td>1.7</td></tr>
      <tr><td>D+</td><td>67-69</td><td>1.0</td></tr>
      <tr><td>E/F</td><td>Below 65</td><td>0.0</td></tr>
  </table>
<p></p>
<div>
<script>
//New row code
let inputTemplate = '<tr valign="top"><th scope="row"><label></label></th><td><input type="text" class="customFieldName code" name="customFieldName[]" value="" placeholder="Grade" /> &ensp; <button href="javascript:void(0);" class="addCF btn btn-success">Add </button><button href="javascript:void(0);" class="remCF btn btn-danger">Remove</button></td></tr>';

$(document).ready(function() {

  // adds a new row
  $("#customFields").on('click', '.addCF', function() {
    $("#customFields").append(inputTemplate);
  });

  // deletes the row
  $("#customFields").on('click', '.remCF', function() {
    $(this).parent().parent().remove();
  });
  //shows the average grade
  $("#click").click(function() {

    let fields = $('.customFieldName'),
    total = 0;
    for (let field of fields)
      total += Number(field.value);
    //Equation
    let average = total / fields.length;
    // Displays the Letter Average and the GPA
    if (average < 65){
        $("#averageGrade2").text("You average is E/F");
    } else if (average <= 66){
        $("#averageGrade2").text("Your average is D");
    } else if (average <= 69){
        $("#averageGrade2").text("Your average is D+");
    } else if (average <= 72){
        $("#averageGrade2").text("Your average is C-");
    } else if (average <= 76){
        $("#averageGrade2").text("Your average is C");
    } else if (average <= 79){
        $("#averageGrade2").text("Your average is C+");
    } else if (average <= 82){
        $("#averageGrade2").text("Your average is B-");
    }  else if (average <= 86){
        $("#averageGrade2").text("Your average is B");
    }  else if (average <= 89){
        $("#averageGrade2").text("Your average is B+");
    }  else if (average <= 92){
        $("#averageGrade2").text("Your average is A-");
    }  else if (average <= 96){
        $("#averageGrade2").text("Your average is A");
    }  else if (average >= 97){
        $("#averageGrade2").text("Your average is A+");
    }
    $("#averageGrade").text("Average Grade: " + average + "%");
    
  })
});
</script>
</div>
<%- include("partials/footer") -%>